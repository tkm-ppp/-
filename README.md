# **ReadLink**

## サービス概要

<aside>
💡

どんなサービスなのかを３行で説明してください。

</aside>

このアプリは、図書館の蔵書を検索し、現在どこの図書館で本を借りられるか確認を行います。又、本のマルチ検索やGoogle Books APIsを利用し本の情報を調べやすくします。図書館の本の返却日を忘れないように通知機能も実装し図書館の利用を便利にします。

## このサービスへの思い・作りたい理由

<aside>
💡

サービスの題材となるものに関してのエピソードがあれば詳しく教えて。
サービスを思いつくにあたって元となる思いがあれば詳しく教えてください。

</aside>

- 図書館をよく利用するが、借りたい本が住んでる市にはなく隣の市や大学図書館にはあることが複数回あり、今すぐ借りたい時どこで借りられるかすぐに分かれば便利であるのにという思いがあった。
- 自分がよく利用するサービスにGoogle Mapがあるが、あくまで様々な情報を取得できるサービスであるため、図書館の詳細情報を調べやすくしたアプリを作りたいと感じたから。
- リアルタイム蔵書検索機能と本の通知機能を両方備えているアプリを作りたかった。

## サービスの利用イメージ

<aside>
💡

ユーザーがこのサービスをどのように利用、それによってどんな価値を得られるかを簡単に説明してください。

</aside>



- 特定の本をすぐに借りたい時に、どこの図書館ならすぐに借りれるか分かる。
- 全国の図書館についての基本情報が分かる。
- ラインでの通知により、本を返却する期日に気づきやすくなる。

## ユーザー層について

<aside>
💡

決めたユーザー層についてどうしてその層を対象にしたのかそれぞれ理由を教えてください。

</aside>

- 本を買いたくないが今すぐ読みたい本がある人
- 図書館をよく利用する人
- 図書館で借りた本の返却期日を忘れやすい人。

## ユーザーの獲得について

<aside>
💡

想定したユーザー層に対してそれぞれどのようにサービスを届けるのか現状考えていることがあれば教えてください。

</aside>

- Xでの活用、RUNTEQコミュニティでの拡散、友人、知人への紹介

## サービスの差別化ポイント・推しポイント

<aside>
💡

似たようなサービスが存在する場合、そのサービスとの明確な差別化ポイントとその差別化ポイントのどこが優れているのか教えてください。
独自性の強いサービスの場合、このサービスの推しとなるポイントを教えてください。

</aside>

- **図書館の公式サイトからの通知：**公式はメール通知であるが、ラインでの通知にして気づきやすくする。
- **図書館日和：**iPhoneにしか対応していない。
- **カーリル：**現在どこの図書館で本が借りれるかを調べる機能はあるが、登録した図書館からの返却通知機能はない。

## 機能候補

<aside>
💡

現状作ろうと思っている機能、案段階の機能をしっかりと固まっていなくても構わないのでMVPリリース時に作っていたいもの、本リリースまでに作っていたいものをそれぞれ分けて教えてください。

</aside>

### MVP

- ログイン機能
    - メールでログイン
- 全国の図書館検索機能
- 現在どこの図書館で本が借りれるかを調べる機能

### 本リリース

- 図書館検索機能
- googlemapと連携する。
- 返却日時の通知機能
- 本に関するマルチ検索
- いいね機能
- 問い合わせリンク
- ログイン機能
    - LINEでログイン

### 余裕があったら

- 図書館のいいね機能　☆☆☆☆☆
- 図書館の連携
    
    ### やり方　資料
    
    カーリルAPIを使用して各図書館のシステムと直接連携することは、APIの設計上直接的には行えません。しかし、カーリルAPIを活用して間接的に図書館システムとの連携を実現する方法があります。以下にその手順を説明します：
    
    1. 蔵書検索と貸出状況の確認:
    カーリルAPIの`check`エンドポイントを使用して、特定の書籍（ISBN）が指定の図書館（systemid）で利用可能かどうかを確認できます[1]。
    2. 予約ページへのリンク:
    APIのレスポンスに含まれる`reserveurl`パラメータを利用します。これは各図書館の予約ページへの直接リンクを提供します[3]。
    3. OpenURL for カーリルの利用:
    カーリルはOpenURLをサポートしており、これを使用することで図書館システムとの連携が可能になります[4]。
        
        ベースURL: `https://api.calil.jp/openurl`
        
        例:
        
        - ISBNによる検索: `https://api.calil.jp/openurl?rft.isbn=4103534222`
        - 書名による検索: `https://api.calil.jp/openurl?rft.btitle=Python`
    4. ユーザーインターフェースの構築:
    APIから得られた情報を元に、ユーザーが簡単に予約操作を行えるインターフェースを構築します。
    5. 非同期処理の実装:
    カーリルAPIは貸出情報の取得に10〜20秒ほどかかる場合があるため、JavaScriptのAjax通信を使用して非同期で情報を取得し、ユーザーにストレスなく表示することが重要です[3]。
    
    注意点:
    
    - 直接的な予約処理はカーリルAPIでは行えません。APIは予約ページへのリンクを提供するのみです。
    - 実際の予約処理は各図書館のシステムで行われます。
    - APIの使用には制限があるため、過度な利用は避けるべきです。
    
    この方法により、カーリルAPIを介して間接的に図書館システムと連携し、ユーザーに対してシームレスな予約体験を提供することが可能です。ただし、最終的な予約処理は各図書館のシステムに依存することに注意が必要です。
    
    Citations:
    [1] https://calil.jp/doc/api.html
    [2] https://calil.jp/doc/about.html
    [3] https://qiita.com/zakirun/items/2cf035a74db6646928d6
    [4] https://calil.jp/doc/api_openurl.html
    [5] https://qiita.com/EasyCoder/items/d4c5da73ba922fb189e1
    [6] https://calil.jp/doc/api_ref.html
    [7] https://gk.calil.jp/guide_v3.pdf
    
    カーリルAPIを使用して図書館システムとの連携を実現するための具体的な手順は以下の通りです：
    1. APIキーの取得:
        ◦ カーリル公式ページでユーザー登録を行います。
        ◦ https://calil.jp/doc/api_ref.html にアクセスし、新しいアプリケーションを追加してAPIキーを取得します[3](https://boook24.com/?p=1562)。
    2. 図書館情報の取得:
        ◦ **`library`** APIエンドポイントを使用して、対象の図書館情報を取得します。
        ◦ 例: **`https://api.calil.jp/library?appkey={あなたのアプリキー}&pref=埼玉県`**[1](https://calil.jp/doc/api_ref.html)
    3. 蔵書検索の実装:
        ◦ **`check`** APIエンドポイントを使用して、特定の書籍（ISBN）が指定の図書館（systemid）で利用可能かどうかを確認します。
        ◦ 例: **`https://api.calil.jp/check?appkey={あなたのアプリキー}&isbn=4834000826&systemid=Aomori_Pref`**[1](https://calil.jp/doc/api_ref.html)
    4. 非同期処理の実装:
        ◦ JavaScriptのAjax通信を使用して、APIからの応答を非同期で取得します。
        ◦ **`continue`** パラメータが1の場合、すべての情報が取得できるまでポーリングを続けます[1](https://calil.jp/doc/api_ref.html)。
    5. 予約ページへのリンク:
        ◦ APIのレスポンスに含まれる **`reserveurl`** パラメータを利用して、各図書館の予約ページへのリンクを提供します[1](https://calil.jp/doc/api_ref.html)。
    6. ユーザーインターフェースの構築:
        ◦ 取得した情報を元に、ユーザーが簡単に蔵書検索や予約操作を行えるインターフェースを構築します。
    7. OpenURL for カーリルの利用:
        ◦ より詳細な連携が必要な場合、OpenURLを使用します。
        ◦ 例: **`https://api.calil.jp/openurl?rft.isbn=4103534222`**
    8. 利用制限の遵守:
        ◦ APIの呼び出し回数制限を遵守し、過度な利用を避けます[1](https://calil.jp/doc/api_ref.html)。
    9. 適切なリンク設定:
        ◦ APIを使って取得された図書館名や貸出状況を表示する際は、必ずカーリルのページへのリンクを設置します[1](https://calil.jp/doc/api_ref.html)。これらの手順を踏むことで、カーリルAPIを使用して図書館システムとの連携を実現できます。ただし、直接的な予約処理はカーリルAPIでは行えず、最終的な予約は各図書館のシステムで行われることに注意が必要です。
    
    1. 1. APIキーの取得:
        - ◦ カーリル公式ページでユーザー登録を行います。
        - ◦ https://calil.jp/doc/api_ref.html にアクセスし、新しいアプリケーションを追加してAPIキーを取得します[3](https://boook24.com/?p=1562)。
    - 
    - 
    1. 2. 図書館情報の取得:
        - ◦ **`library`** APIエンドポイントを使用して、対象の図書館情報を取得します。
        - ◦ 例: **`https://api.calil.jp/library?appkey={あなたのアプリキー}&pref=埼玉県`**[1](https://calil.jp/doc/api_ref.html)
    - 
    - 
    1. 3. 蔵書検索の実装:
        - ◦ **`check`** APIエンドポイントを使用して、特定の書籍（ISBN）が指定の図書館（systemid）で利用可能かどうかを確認します。
        - ◦ 例: **`https://api.calil.jp/check?appkey={あなたのアプリキー}&isbn=4834000826&systemid=Aomori_Pref`**[1](https://calil.jp/doc/api_ref.html)
    - 
    - 
    1. 4. 非同期処理の実装:
        - ◦ JavaScriptのAjax通信を使用して、APIからの応答を非同期で取得します。
        - ◦ **`continue`** パラメータが1の場合、すべての情報が取得できるまでポーリングを続けます[1](https://calil.jp/doc/api_ref.html)。
    - 
    - 
    1. 5. 予約ページへのリンク:
        - ◦ APIのレスポンスに含まれる **`reserveurl`** パラメータを利用して、各図書館の予約ページへのリンクを提供します[1](https://calil.jp/doc/api_ref.html)。
    - 
    1. 6. ユーザーインターフェースの構築:
        - ◦ 取得した情報を元に、ユーザーが簡単に蔵書検索や予約操作を行えるインターフェースを構築します。
    - 
    1. 7. OpenURL for カーリルの利用:
        - ◦ より詳細な連携が必要な場合、OpenURLを使用します。
        - ◦ 例: **`https://api.calil.jp/openurl?rft.isbn=4103534222`**
    - 
    - 
    1. 8. 利用制限の遵守:
        - ◦ APIの呼び出し回数制限を遵守し、過度な利用を避けます[1](https://calil.jp/doc/api_ref.html)。
    - 
    1. 9. 適切なリンク設定:
        - ◦ APIを使って取得された図書館名や貸出状況を表示する際は、必ずカーリルのページへのリンクを設置します[1](https://calil.jp/doc/api_ref.html)。
    - 
    
    **共有書き直す**
    
- 独自ドメイン
- 使い方を記載
- ネイティブアプリ化（pwa化）
- 読んだ本登録する機能（タグとして、既読）
- 読みたい本を登録する機能
- 話題の本から生成AIによるレコメンド機能をツイッターに投稿
- 自分の好きな本のレシピ（まとめ）をツイッターに投稿

## 機能の実装方針予定

<aside>
💡

一般的なCRUD以外の実装予定の機能についてそれぞれどのようなイメージ(使用するAPIや)で実装する予定なのか現状考えているもので良いので教えて下さい。 

</aside>

| 機能 | 使用する技術 | 具体の使用場面 |
| --- | --- | --- |
| アカウント登録/ログイン | Devise |  |
| 図書館データベース/
蔵書検索 | カーリル図書館API/googlemap api | 図書館の検索/現在どこの図書館で本が借りれるかを調べる機能　|
| 非同期通信/オートコンプリート機能 | Hotwire(Turbo, Stimulus) |  |
| 検索機能 | Runsuck | マルチ検索時 |
| 返却日時の通知機能 | LINE Messaging API |  |
| 本の検索機能 | ndlAPI |  |

# -

## ■ 画面遷移
https://www.figma.com/design/2QrYPgWgoUxBn6t7itM78d/ReadLink?node-id=0-1&node-type=canvas&t=f9MfXj9rV8qHNNQ4-0

## ■ ER図
https://dbdiagram.io/d/ReadLink-6729dbe3e9daa85aca59fd84
<img src="https://dbdiagram.io/d/ReadLink-6729dbe3e9daa85aca59fd84" alt="Gyazo画像" />